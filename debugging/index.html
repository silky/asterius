<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>The runtime debugging feature - Asterius</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "The runtime debugging feature";
    var mkdocs_page_input_path = "debugging.md";
    var mkdocs_page_url = "/debugging/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Asterius</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">For users</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../building/">Building guide</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">For developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../checklist/">Checklist</a>
                </li>
                <li class="">
                    
    <a class="" href="../wasm-in-hs/">Writing WebAssembly code in Haskell</a>
                </li>
                <li class="">
                    
    <a class="" href="../jsffi/">JavaScript FFI</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">The runtime debugging feature</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#the-runtime-debugging-feature">The runtime debugging feature</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../architecture/">Project architecture</a>
                </li>
                <li class="">
                    
    <a class="" href="../webassembly/">WebAssembly as a Haskell compilation target</a>
                </li>
                <li class="">
                    
    <a class="" href="../readings/">Reading list</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Asterius</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>For developers &raquo;</li>
        
      
    
    <li>The runtime debugging feature</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/tweag/asterius/edit/master/docs/debugging.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="the-runtime-debugging-feature">The runtime debugging feature</h2>
<p>There is a runtime debugging mode which can be enabled by the <code>--debug</code> flag for <code>ahc-link</code>. When enabled, the compiler inserts "tracing" instructions in the following places:</p>
<ul>
<li>The start of a function/basic block</li>
<li><code>SetLocal</code> when the local type is <code>I64</code></li>
<li>Memory load/stores, when the value type is <code>I64</code></li>
</ul>
<p>The tracing messages are quite helpful in observing control flow transfers and memory operations. Remember to also use the <code>--output-link-report</code> flag to dump the linking report, which contains mapping from data/function symbols to addresses.</p>
<p>The runtime debugging mode also enables a "memory trap" which intercepts every memory load/store instruction and checks if the address is null pointer or other uninitialized regions of the linear memory. The program immediately aborts if an invalid address is encountered. (When debugging mode is switched off, program continues execution and the rest of control flow is all undefined behavior!)</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../architecture/" class="btn btn-neutral float-right" title="Project architecture">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../jsffi/" class="btn btn-neutral" title="JavaScript FFI"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/tweag/asterius" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../jsffi/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../architecture/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
